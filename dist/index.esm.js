import t from"element-resize-detector";var e=t({strategy:"scroll"});var i=function(t,e,i,s,n,r,o,a,l,u){"boolean"!=typeof o&&(l=a,a=o,o=!1);var c,h="function"==typeof i?i.options:i;if(t&&t.render&&(h.render=t.render,h.staticRenderFns=t.staticRenderFns,h._compiled=!0,n&&(h.functional=!0)),s&&(h._scopeId=s),r?(c=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),e&&e.call(this,l(t)),t&&t._registeredComponents&&t._registeredComponents.add(r)},h._ssrRegister=c):e&&(c=o?function(){e.call(this,u(this.$root.$options.shadowRoot))}:function(t){e.call(this,a(t))}),c)if(h.functional){var d=h.render;h.render=function(t,e){return c.call(e),d(t,e)}}else{var f=h.beforeCreate;h.beforeCreate=f?[].concat(f,c):[c]}return i},s=i({},void 0,{name:"rl-carousel",props:{align:{type:String,default:"center",validator:function(t){return null!==t.match(/^(left|center|right)$/)}},animateIn:{type:Boolean,default:!1},noWrap:{type:Boolean,default:!1},static:{type:Boolean,default:!1},touchWrap:{type:Boolean,default:!1},transition:{type:String,default:"ease",validator:function(t){return null!==t.match(/^(ease|linear|ease-in|ease-out|ease-in-out|cubic-bezier\(.*\))$/)}},transitionTime:{type:[Number,String],default:.5},value:{type:Number,required:!0},vertical:{type:Boolean,default:!1}},data:function(){return{positioned:!1,slideSizes:[],carouselSize:0,clientSize:0,slideCount:0,mainAxisStart:void 0,mainAxisEnd:void 0,crossAxisStart:void 0,crossAxisEnd:void 0}},render:function(){return this.$scopedSlots.default({wrapperStyles:this.wrapperStyles,slides:{count:this.slideCount,active:this.value}})},computed:{wrapperStyles:function(){return{style:{display:"inline-flex","flex-wrap":(this.vertical?"":"no")+"wrap",transform:"translate"+(this.vertical?"Y":"X")+"("+-this.mainAxisTranslate+"px)",transition:this.transitionProperty}}},shouldAnimateIn:function(){return this.animateIn||this.positioned},mainAxisDragOffset:function(){return void 0===this.mainAxisStart||void 0===this.mainAxisEnd?0:this.mainAxisStart-this.mainAxisEnd},transitionProperty:function(){return void 0===this.mainAxisEnd&&this.animated&&this.shouldAnimateIn?"transform "+parseFloat(this.transitionTime)+"s "+this.transition:"all 0s"},mainAxisTranslate:function(){return this.accumulatedTranslate-this.offsetToAlignInView+this.mainAxisDragOffset},accumulatedTranslate:function(){return this.slideSizes.slice(0,this.value).reduce(function(t,e){return t+e},0)},offsetToAlignInView:function(){switch(this.align){case"left":return 0;case"center":return this.carouselSize<this.clientSize?this.carouselSize/2-this.slideSizes[this.value]/2:(this.clientSize-this.slideSizes[this.value])/2;case"right":return this.clientSize-this.slideSizes[this.value]}},wrap:function(){return!this.noWrap},animated:function(){return!this.static}},methods:{recalculateDimensions:function(t){var e,i="client"+(this.vertical?"Height":"Width"),s=this.$children.filter(function(t){return"rl-carousel-slide"===t.$options.name});this.slideCount=s.length,this.value>this.slideCount-1&&this.$emit("input",Math.max(this.slideCount-1,0)),this.clientSize=t[i],this.slideSizes.splice(0,this.slideSizes.length),s.length>0?((e=this.slideSizes).push.apply(e,s.map(function(t){return t.$el[i]})),this.carouselSize=s.map(function(t){return t.$el[i]}).reduce(function(t,e){return t+e},0)):this.carouselSize=0,this.$emit("size-calculated")}},watch:{value:function(t){t>=this.slideCount&&this.$emit("input",this.wrap?0:this.slideCount-1),t<0&&this.$emit("input",this.wrap?this.slideCount-1:0),this.$emit("slide-changed",this.value)}},mounted:function(){var t=this;this.recalculateDimensions(this.$el),e.listenTo(this.$el,function(e){t.$emit("resized"),t.recalculateDimensions(e)}),this.touchstart=function(e){t.$emit("touchstart"),t.mainAxisStart=Math.floor(e.touches[0]["client"+(t.vertical?"Y":"X")]),t.crossAxisStart=Math.floor(e.touches[0]["client"+(t.vertical?"X":"Y")])},this.touchmove=function(e){t.$emit("touchmove"),t.mainAxisEnd=Math.floor(e.touches[0]["client"+(t.vertical?"Y":"X")]),t.crossAxisEnd=Math.floor(e.touches[0]["client"+(t.vertical?"X":"Y")]);var i=Math.atan2(t.mainAxisEnd-t.mainAxisStart,t.crossAxisEnd-t.crossAxisStart)*(180/Math.PI);(i>-135&&i<-45||i>45&&i<135)&&e.preventDefault()},this.touchend=function(){t.$emit("touchend"),void 0!==t.mainAxisEnd?(t.$emit("swipe-recognized"),Math.abs(t.mainAxisDragOffset)/t.slideSizes[t.value]*100>=20&&(t.mainAxisDragOffset<0&&(t.value>0||t.touchWrap)?t.$emit("input",t.value-1):t.mainAxisDragOffset>0&&(t.value<t.slideCount-1||t.touchWrap)&&t.$emit("input",t.value+1)),t.mainAxisStart=void 0,t.mainAxisEnd=void 0,t.crossAxisStart=void 0,t.crossAxisEnd=void 0):t.mainAxisStart=void 0},this.$el.addEventListener("touchstart",this.touchstart),this.$el.addEventListener("touchmove",this.touchmove),this.$el.addEventListener("touchend",this.touchend),this.childNodeObserver=new MutationObserver(function(){t.$emit("slide-count-changed"),t.recalculateDimensions(t.$el)}),this.childNodeObserver.observe(this.$el,{childList:!0,subtree:!0}),setTimeout(function(){t.positioned=!0,t.$emit("positioned")},16)},beforeDestroy:function(){this.$emit("before-destroy"),e.removeAllListeners(this.$el),this.$el.removeEventListener("touchstart",this.touchstart),this.$el.removeEventListener("touchmove",this.touchmove),this.$el.removeEventListener("touchend",this.touchend),this.childNodeObserver.disconnect()}},void 0,void 0,void 0,void 0,void 0),n=i({},void 0,{name:"rl-carousel-slide",render:function(t){return t("div",{style:{"flex-shrink":0}},this.$slots.default)}},void 0,void 0,void 0,void 0,void 0);export{s as RlCarousel,n as RlCarouselSlide};
